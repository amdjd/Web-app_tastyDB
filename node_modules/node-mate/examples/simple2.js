var mate = require('../');

var node = mate.createNode({
	networkPort: 2016,
	rootNode: {
		ip: '127.0.0.1',
		port: 2015
	}
});

node.on('message', function(from, message) {
	console.log('receive ' + from.id.toString() + ' message: ' + message);
});

node.on('root_connected', function(root) {
	console.log('root node connected');

	node.send(root.id.toString(), 'I\'m here!', function(success) {
		if (success === true) {
			console.log('send message success');
		} else {
			console.log('send message failed');
		}
	});
});

node.on('root_disconnect', function(root) {
	console.log('root node disconnect');
});
